---
layout: post
title: sql基础
categories: db
tags: sql
---

*   [select 执行顺序](#select)
    *   [细解](#sql)
*   [索引](#index)
*   [参考](#ref)

8.  ps

    1.  update product_details set weight=38, exist = 1 where name = 'jim'// 更新操作,and是错误的　

    2.  create table select ：创建一个和原表字段结构一致的新表，去掉所有的约束，同时将原表select的结果数据插入新表　　　　

    3.  create table like ： 创建一个和原表结构完全一致的新空表，包含全部约束　　　　

    4.  on 后连接的字段要考虑设计索引。　　

    5.  show variables like 'log_slow_queries';　查看是否启用慢日志　

    6.  show  variables like 'long_query_time';　查看慢于多少秒的sql会记录到慢日志中

    7.  涉及数据库的字段更改,需要考虑读取,写入的时间段,考虑 ***兼容性***,  ***老数据***,`发布过程服务不能停`,注意***版本***的概念.    

## 索引 {#index}

1.  查看表的索引　　

        show index from tb_xx;
2.  添加表的索引,唯一索引，主键　　

        alter table tb_xx add index `idx_site_channel_status`(`site`,`channel`,`status`)
        alter table tb_xx unique `uniq_name`(`name`)
        alter table tb_xx primary key  `id` (`id`)
3.  删除表的索引　　

        alter table tb_xx drop index `idx_site_channel_status`　　　/　　drop index `idx_site_channel_status` on tb_xx;
        alter table tb_xx drop index `uniq_name` (*跟删除普通的索引是一样的*)
        alter table tb_xx drop primary key;
    ps: **auto_increment只能作用于key,删除有auto_increment约束的索引时，必须先将auto_increment约束删除**

## other

COLLATE=utf8_bin

    select 'a' = 'A';
    1
    select binary 'a' = 'A'
    0

## 参考 {#ref}

[1]<http://www.dofactory.com/sql/alias>

[2]<http://www.cnblogs.com/JohnABC/p/3309144.html>

[mysql查询技巧]<http://mp.weixin.qq.com/s?timestamp=1462151732&src=3&ver=1&signature=OSVBirQ*w6WZWLcZjH6vpvdgkDEJmVj*2H8YvyHQ*kU3SMtwHC8UZjxCuA7yZG-okuygUsbvjIWjyYv0kzUA6EY59CrHnmPfjAS6z6wa9mVuYVuLetcoDSLcqObopAFRKJTeX*wR6B4E9m0GRcdt-TAvRLRKqxJMgkjiEN6WVls=>

[Character Sets and Collations Supported by MySQL]<http://dev.mysql.com/doc/refman/5.7/en/charset-charsets.html>

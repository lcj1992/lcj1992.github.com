<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="baidu-site-verification" content="vuaTJrjFLn" />
    <meta name="keywords" content="foolchild,linux,java,技术,互联网" />
    <meta name="description" content="技术博客，记录foolchild技术道路上成长的点滴" />
    <title> operating system basic  </title>
    <link rel="stylesheet" href="/css/default.css" type="text/css"/>
    <link rel="stylesheet" href="/css/small.css" type="text/css" media="(max-width: 720px)"/>
    <link rel="stylesheet" href="/css/syntax.css" type="text/css"/>
    <link rel="stylesheet" href="/css/bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="/css/codeboy.css" type="text/css"/>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
</head>
<body>
<div id="container">
    <div class="nav">
    <div class="nav_nav">
        <a href="/">首页</a>
        <a href="/categories.html">分类</a>
        <a href="/book.html">书单</a>
        <a href="/about.html">关于</a>
    </div>
</div>

    <div id="main">
        <h2> operating system basic </h2>
        <h3 id="objlibexe">obj,lib,exe</h3>
<p><code class="highlighter-rouge">obj</code>是编译过的二进制文件，cpp对应的二进制格式就是<code class="highlighter-rouge">obj</code>，一堆<code class="highlighter-rouge">obj</code>的集合是<code class="highlighter-rouge">lib</code>，<code class="highlighter-rouge">obj</code>文件是未经重定位的，<code class="highlighter-rouge">obj</code>只给出的是程序的相对地址，而<code class="highlighter-rouge">exe</code>给出的是绝对地址，<code class="highlighter-rouge">obj</code>经链接器和资源文件链接后就成了可执行文件<code class="highlighter-rouge">exe</code>了。</p>

<h3 id="section">编译器的工作流程</h3>
<p>1.预处理 展开头文件 .c-&gt;.i<br />
2.编译 c语言到汇编语言 .i-&gt;.s<br />
3.汇编 汇编语言到机器语言 .s-&gt;.o<br />
4.链接 ??? .o-&gt;.exe或者elf文件<br />
5.加载并运行</p>

<h3 id="elf">elf</h3>
<ul>
  <li>可重定位目标文件</li>
  <li>可执行目标文件</li>
  <li>共享目标文件</li>
</ul>

<h3 id="fork">fork</h3>
<p>fork子进程都从父进程那里得到了什么？</p>

<h3 id="section-1">僵尸进程</h3>

<h3 id="cachebuffer">cache与buffer</h3>
<p><em><code class="highlighter-rouge">cache</code></em>：cpu和内存之间一种高速存储器，存储一段时间内可能频繁访问的内存页面，对应的有那几种页面置换算法，一定程度上缓解cpu和内存速度不匹配的问题，现在的intel处理器好像都是三级缓存了。<br />
其实更广义的缓存，小黑哥说的好，热点数据，cpu记录一级cache的热点数据，一级cache记录二级cache的热点数据…三级cache记录内存的热点数据，内存记录硬盘的热点数据，硬盘记录网络的热点数据（分布式系统）。<br />
要缓存就要记录你缓存了的数据的元信息，对应的有MMU中的TLB（页表缓冲），页表，文件描述符表，再到分布式系统如hadoop的namenode记录datanode的一些元信息。<br />
记录元信息，就要消耗资源，但当数据达到一定程度，这些消耗的资源对于他带来的价值相对来说可以忽略的话，就要考虑加了，要不也不会分这么多层，cpu》一级cache》二级cache》三级cache》内存》硬盘》网络。<br />
<em><code class="highlighter-rouge">buffer</code></em>：我要读硬盘，一个扇区一个扇区读也是读，几个扇区几个扇区（块，一般是八个扇区4096B）读也是读，那我是一个扇区读呢还是一下读取几个扇区呢？读文件，我一个字节一个字节读也是读，我多个字节读也是读，那我是一个一个读呢还是一次读取多个呢？等等<br />
往往我通过预先读（写）的时间消耗，比我需要时再读（写）等待这些操作的时间要短。所以我要采取批量操作。<br />
<code class="highlighter-rouge">cache</code>与<code class="highlighter-rouge">buffer</code>都能改善io，<code class="highlighter-rouge">cache</code>利用的局部性原理，局部性就要记录你的局部的信息，就要涉及换入换出的策咯问题；<code class="highlighter-rouge">buffer</code>主要是批量操作，批量操作减少不必要的状态切换。</p>

<h3 id="section-2">并行与并发</h3>
<p>答：逻辑流的执行在时间上有重叠，就说这是并发流，并发的思想与流运行的处理器的核数或者计算机数无关<br />
并行流是并发流的一种特殊情况，当这些逻辑流在不同的处理器核或者计算机上，我们就称它们为并行流
例：<br />
a执行在0s-5s，  	
b执行在3s-6s，<br />
c执行在1s-2s；则a与c并发，a与b并发，但是b与c不并发<br />
如果a与b还在不同的cpu上运行，那么a与b还是并行了。</p>

<h3 id="section-3">进程与线程</h3>
<p>线程是指进程内的一个执行单元,也是进程内的可调度实体.
与进程的区别:<br />
(1)地址空间:进程内的一个执行单元;进程至少有一个线程;它们共享进程的地址空间;而进程有自己独立的地址空间;<br />
(2)资源拥有:进程是资源分配和拥有的单位,同一个进程内的线程共享进程的资源<br />
(3)线程是处理器调度的基本单位,但进程不是.<br />
4)二者均可并发执行.</p>

<p>进程和线程都是由操作系统所体会的程序运行的基本单元，系统利用该基本单元实现系统对应用的并发性。进程和线程的区别在于：</p>

<p>简而言之,一个程序至少有一个进程,一个进程至少有一个线程.<br />
线程的划分尺度小于进程，使得多线程程序的并发性高。<br />
另外，进程在执行过程中拥有独立的内存单元，而多个线程共享内存，从而极大地提高了程序的运行效率。<br />
线程在执行过程中与进程还是有区别的。每个独立的线程有一个程序运行的入口、顺序执行序列和程序的出口。<br />
但是线程不能够独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。<br />
从逻辑角度来看，多线程的意义在于一个应用程序中，有多个执行部分可以同时执行。但操作系统并没有将多个线程看做多个独立的应用，<br />
来实现进程的调度和管理以及资源分配。这就是进程和线程的重要区别。</p>

<p>进程是具有一定独立功能的程序关于某个数据集合上的一次运行活动,进程是系统进行资源分配和调度的一个独立单位.<br />
线程是进程的一个实体,是CPU调度和分派的基本单位,它是比进程更小的能独立运行的基本单位.<br />
线程自己基本上不拥有系统资源,只拥有一点在运行中必不可少的资源(如程序计数器,一组寄存器和栈),
但是它可与同属一个进程的其他的线程共享进程所拥有的全部资源.<br />
一个线程可以创建和撤销另一个线程;同一个进程中的多个线程之间可以并发执行.</p>

<h3 id="section-4">冯诺依曼计算机体系结构</h3>
<p>冯诺依曼计算机体系结构包含： cpu、存储器、输入输出设备，所有的单元都通过总线项链，总线分为地址总线和数据总线。</p>

<h4 id="cpu">cpu</h4>
<p>cpu由算术逻辑单元(ALU）和控制单元构成。ALU包含一个能完成算术和逻辑操作的功能单元，以及各种寄存器。控制单元包含一个程序计数器和一个指令寄存器。程序计数器指示下一步应该执行的指令，而指令寄存器包含当前指令的拷贝。</p>

<h4 id="section-5">存储器</h4>
<p>存储器是计算机存储程序和数据的部件。内存接口由三个寄存器组成：存储地址寄存器（MAR）和存储数据寄存器（MDR）和命令寄存器（CR）。</p>

<h4 id="io">IO设备</h4>
<p>I/O设备分为存储设备、字符设备（终端显示器、鼠标）、通信设备（如连接调制解调器的串行端口或网络接口）。每个设备都通过设备控制器与计算机的地址和数据总线相连。控制器提供一组物理部件，可以通过CPU指令操纵他们以完成I/O操作。</p>

<h3 id="section-6">多道程序设计技术和分时技术</h3>

<h4 id="section-7">多道程序设计技术</h4>
<p>多道程序设计技术是在计算机内存中存放几道相互独立的程序，使他们在管理程序的控制之下，相互穿插的进行，即当一个正在cpu上运行的程序因为要输入或输出而不能继续运行下去，就把cpu让给另一道程序。多道程序运行的特征是：</p>

<p>1.多道-计算机内存中同时存放几道相互独立的程序</p>

<p>2.宏观上并行-同时进入系统的几道程序都处于运行过程中</p>

<p>3.微观上串行—内存中的多道程序轮流或分时的占有cpu，交替执行。</p>

<h4 id="section-8">分时技术</h4>
<p>分时技术是把cpu时间划分为很短的时间片轮流的分配给各个联机作业使用，如果某个作业在分配的时间片用完之前还未完成计算，该作业就暂时中断，等待下一轮继续计算。</p>

<p>在多道程序设计技术和分时技术的支持下，出现了批处理系统和分时系统。</p>

<h3 id="section-9">操作系统的基本概念</h3>

<h4 id="section-10">基本定义</h4>
<p>操作系统是一个大型的程序系统，它负责计算机系统软、硬件资源的分配和管理；控制和协调并发活动；提供用户接口，使用户获得良好的工作环境。</p>

<h4 id="section-11">操作系统的资源管理功能</h4>
<p>操作系统资源管理的目标是提高系统资源的利用率和方便用户使用：</p>

<p>cpu分配</p>

<p>1.提出进程调度策略</p>

<p>2.给出进程调度算法</p>

<p>3.进行cpu的分派</p>

<p>存储管理</p>

<p>1.存储分配和存储无关性</p>

<p>如果有多个用户程序在机器上运行，其程序和数据都需要占用一定的存储空间。这些程序和数据将分别安置在主存的什么位置，各占多大区域，这些是存储问题。然而用户无法预知存储管理不见把他们的程序分配到主存的什么地方，而且用户也希望摆脱存储地址，存储空间大小等细节问题，为此，存储管理不见应提供地址重定位能力，提供重定位装配程序或地址映像结构等。</p>

<p>2.存储保护</p>

<p>由于主存中同时存放几道程序，为了防止某道程序干扰、破坏其他用户程序、存储管理必须保证每个用户程序只能访问它自己的存储空间，而不能存取任何其他范围的信息，也就是要提供存储包含的手段。存储保护必须由硬件提供支持，具体保护方法有基址、界限寄存器法、存储键和锁等。</p>

<p>3.存储扩充</p>

<p>主存空间是计算机资源中重要的资源之一，尤其是在多道运行环境下，主存资源显得更加紧张。通常使用联机辅助存储器，通过虚拟存储机制和软件去扩充主存空间。若系统具备这一功能，称该系统提供了虚拟存储技术。</p>

<p>设备管理</p>

<p>设备管理是操作系统中最庞杂、最琐碎的部分，其原因是：</p>

<p>1.这部分工作主要涉及很多实际的物理设备，这些设备品种繁多、用法各异；</p>

<p>2.各种外部设备都能和主机并行工作，而且有的设备可被多个程序所共享；</p>

<p>3.主机和外部设备以及各类外部设备之间的速度极不匹配，级差很大。</p>

<p>基于这些原因，设备管理主要解决以下问题：</p>

<p>1.设备无关性</p>

<p>用户向系统申请和使用的设备与实际操作的设备无关，即在用户程序中活在资源申请命令中使用设备的逻辑名，此即为与设备无关性。这一特性不仅为用户使用设备提供了方便，而且也提高了设备的利用率。</p>

<p>2.设备分配</p>

<p>设备分配通常采用三种基本技术：独享、共享及虚拟分配技术</p>

<p>3.设备的传输控制</p>

<p>软件资源管理</p>

<p>为用户提供一种简便的、统一的存取和管理信息的方法，并要解决信息的共享、数据的存取控制和保密等问题。</p>

<h4 id="section-12">操作系统的特性</h4>
<p>并发：指能处理读个哦哦同时性活动的能力</p>

<p>共享：指多个计算任务对资源的共同享用</p>

<p>不确定性：指能处理随机发生的多个事件，处理大量的、随机的时间序列，使各用户的计算任务正确地完成</p>

<p>虚拟性：把物理上的一个实体变成逻辑上多个对应物或把物理上的多个实体变成逻辑上的一个对应物的技术</p>

<h4 id="section-13">操作系统应解决的基本问题</h4>
<p>1.提出解决资源分配的策略</p>

<p>2.协调并发活动的关系</p>

<p>3.保证数据的一致性</p>

<p>4.实现资源的存取控制</p>

        <ul class="prev_next">
            
            <li>
                <span>上一篇</span>
                <a href="/2014/11/09/sort">内部排序</a>
            </li>
            
            
            <li>
                <span>下一篇</span>
                <a href="/2014/11/12/fileSystem">文件系统相关</a>
            </li>
            
        </ul>
        <div class="ds-share flat" data-thread-key="/2014/11/11/OSBasic" data-title="operating system basic"
             data-url="http://lcj1992.github.io/2014/11/11/OSBasic">
            <div class="ds-share-inline">
                <ul class="ds-share-icons-16">

                    <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
                    <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
                    <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

                </ul>
                <div class="ds-share-icons-more">
                </div>
            </div>
        </div>
        <div class="ds-thread" data-thread-key="/2014/11/11/OSBasic" data-title="operating system basic"
             data-url="http://lcj1992.github.io/2014/11/11/OSBasic"></div>
        <!-- 多说评论框 end -->
        <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
        <script type="text/javascript">
            var duoshuoQuery = {short_name: "lcj1992"};
            (function () {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';
                ds.async = true;
                ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
        </script>

        <!-- jQuery -->
        <script src="/js/jquery.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="/js/bootstrap.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="/js/codeboy.js"></script>

        <script src="/js/bootstrap3-typeahead.js"></script>
        <script src="/js/jquery.hotkeys.js"></script>
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                            (i[r].q = i[r].q || []).push(arguments)
                        }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-72949519-1', 'auto');
            ga('send', 'pageview');

        </script>

        <!-- TODO: only load in tag.html -->
        <script src="/js/jquery.tagcloud.js" type="text/javascript" charset="utf-8"></script>
        <script language="javascript">
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'}
            };
            $(function () {
                $('#tag_cloud a').tagcloud();
            });
        </script>

        <!-- async load function -->
        <script>
            function async(u, c) {
                var d = document, t = 'script',
                        o = d.createElement(t),
                        s = d.getElementsByTagName(t)[0];
                o.src = u;
                if (c) {
                    o.addEventListener('load', function (e) {
                        c(null, e);
                    }, false);
                }
                s.parentNode.insertBefore(o, s);
            }
        </script>

        <!-- Highlight.js -->
        <script>
            async("https://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () {
                hljs.initHighlightingOnLoad();
            })
        </script>
        <link href="https://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">


        <script>
            $(document).ready(function () {
                var time1 = 0;
                var show = false;
                var names = new Array(); //文章名字等
                var urls = new Array(); //文章地址
                $(document).keyup(function (e) {
                    var time2 = new Date().getTime();
                    if (e.keyCode == 17) {
                        var gap = time2 - time1;
                        time1 = time2;
                        if (gap < 500) {
                            if (show) {
                                $(".search-tool").css("display", "none");
                                show = false;
                            } else {
                                $(".search-tool").css("display", "block");
                                show = true;
                                $("#search-content").val("");
                                $("#search-content").focus();
                            }
                            time1 = 0;
                        }
                    } else if (e.keyCode == 27) {
                        $(".search-tool").css("display", "none");
                        show = false;
                        time1 = 0;
                    }
                });

                $("#search-content").keyup(function (e) {
                    var time2 = new Date().getTime();
                    if (window.event.keyCode == 17) {
                        var gap = time2 - time1;
                        time1 = time2;
                        if (gap < 500) {
                            if (show) {
                                $(".search-tool").css("display", "none");
                                show = false;
                            } else {
                                $(".search-tool").css("display", "block");
                                show = true;
                                $("#search-content").val("");
                                $("#search-content").focus();
                            }
                            time1 = 0;
                        }
                    }
                });

                $("#close-btn").click(function () {
                    $(".search-tool").css("display", "none");
                    show = false;
                    time1 = 0;
                });

                $("#search-btn").click(function () {
                    $(".search-tool").css("display", "block");
                    show = true;
                    $("#search-content").val("");
                    $("#search-content").focus();
                    time1 = 0;
                });
                // 家目录快捷键
                $(document).bind('keydown', 'alt+h', function () {
                    window.location.href = "/";
                });
                // 目录快捷键
                $(document).bind('keydown', 'alt+c', function () {
                    window.location.href = "/categories.html";
                });
                // 个人介绍页快捷键
                $(document).bind('keydown', 'alt+a', function () {
                    window.location.href = "/about.html";
                });
                // 上一篇
                $(document).bind('keydown', 'alt+p', function () {
                    window.location.href = "/2014/11/09/sort";
                });
                // 下一篇
                $(document).bind('keydown', 'alt+n', function () {
                    window.location.href = "/2014/11/12/fileSystem";
                });

                $.getJSON("/search.json").done(function (data) {
                    if (data.code == 0) {
                        for (var index in data.data) {
                            var item = data.data[index];
                            names.push(item.title);
                            urls.push(item.url);
                        }

                        $("#search-content").typeahead({
                            source: names,

                            afterSelect: function (item) {
                                $(".search-tool").css("display", "none");
                                show = false;
                                window.location.href = (urls[names.indexOf(item)]);
                                return item;
                            }
                        });
                    }
                });

            });
        </script>

        <style>
            @media screen and (min-width: 768px) {
                .dropdown-menu {
                    float: none;
                    font-size: 20px;
                    width: 70%;
                    margin: 0 15%;
                }

                .search-tool ul {
                    width: 70%;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                }

                .search-content {
                    width: 70%;
                    margin: 0 15%;
                    position: absolute;
                    top: 13%;
                    left: auto;
                    right: auto;
                    font-size: 22px;
                    height: 50px;
                    background-color: #eee;
                    color: black;
                    opacity: 1.0;
                }
            }

            @media screen and (max-width: 767px) {
                .dropdown-menu {
                    float: none;
                    font-size: 20px;
                    width: 96%;
                    margin: 0 2%;
                }

                .search-tool ul {
                    width: 96%;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                }

                .search-content {
                    width: 96%;
                    margin: 0 2%;
                    position: absolute;
                    top: 10%;
                    left: auto;
                    right: auto;
                    font-size: 22px;
                    height: 50px;
                    background-color: #eee;
                    color: black;
                    opacity: 1.0;
                }
            }
        </style>
        <div class="search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right:  0px;
      opacity: 0.95; background-color: #111111; z-index: 9999; display: none;">
            <input type="text" class="form-control search-content" id="search-content" placeholder="文章标题 日期 标签">

            <div style="position: fixed; top: 16px; right: 16px;">
                <img src="/images/search/close.png" id="close-btn"/>
            </div>
        </div>

        <div style="position: fixed; right: 12px; top: 50%;bottom: 50%;">
            <img src="/images/search/search.png" id="search-btn" title="双击ctrl试一下"/>
        </div>

    </div>
</div>
</body>
</html>

